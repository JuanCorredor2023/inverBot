{% extends "base.html" %}
{% block title %}Demo – AI Stock Predictor{% endblock %}

{% block head_extra %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<section class="py-5">
  <div class="container">
    <h2 class="text-center mb-4">Resultados (muestra)</h2>
    <canvas id="stockChart" height="120"></canvas>
    <p class="text-center mt-3">
      *Esta gráfica es una simulación local. Integra tu endpoint de predicción
      cuando tu backend esté listo.
    </p>
  </div>
</section>
{% endblock %}

{% block scripts_extra %}
<script>
  // === Demo Chart Logic (simulación aleatoria – quita o sustituye cuando conectes tu API) ===
  const ctx = document.getElementById('stockChart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [
        {
          label: 'Acción XYZ',
          data: [],
          tension: 0.3,
          fill: false,
          borderWidth: 2,
        },
      ],
    },
    options: {
      responsive: true,
      scales: {
        x: { ticks: { color: '#fff' } },
        y: { ticks: { color: '#fff' } },
      },
    },
  });
  // Simulación: agrega un punto cada 5 s
  setInterval(() => {
    const now = new Date().toLocaleTimeString();
    const random = (Math.random() * 10 + 100).toFixed(2);

    chart.data.labels.push(now);
    chart.data.datasets[0].data.push(random);

    if (chart.data.labels.length > 12) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
    }

    chart.update();
  }, 5000);
</script>
{% endblock %}